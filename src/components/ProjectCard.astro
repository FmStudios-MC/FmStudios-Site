---
import Icon from './Icon.astro';
import type { Project } from '../data/projects';
import { statusConfig } from '../data/projects';

interface Props {
  project: Project;
}

const { project } = Astro.props;
const status = statusConfig[project.status];
---

<div
  class="card cursor-pointer project-card p-5"
  data-project-id={project.id}
  data-category={project.category}
  data-subcategory={project.subcategory || ''}
  data-name={project.name.toLowerCase()}
  data-description={project.description.toLowerCase()}
  data-features={project.features.join(' ').toLowerCase()}
>
  <div class="flex items-start gap-4 mb-4">
    <img
      src={project.logo}
      alt={project.name}
      width="64"
      height="64"
      class="w-16 h-16 object-cover flex-shrink-0"
      loading="lazy"
    />
    <div class="flex-1 min-w-0">
      <h3 class="text-lg font-bold truncate" style="color: var(--text-primary);">{project.name}</h3>
      <div class="flex flex-wrap gap-2 mt-1">
        {status && (
          <span class={`${status.badge} text-xs font-semibold px-2 py-0.5`}>{status.label}</span>
        )}
      </div>
    </div>
  </div>

  <div class="flex flex-wrap gap-2 mb-3">
    <span class="text-xs font-medium px-2 py-0.5 capitalize" style="background-color: var(--accent); color: #fff;">
      {project.category}
    </span>
    <span class="text-xs font-mono px-2 py-0.5 border border-[var(--border-card)]" style="color: var(--text-muted);">
      {project.version}
    </span>
  </div>

  <p class="text-sm line-clamp-3 mb-4" style="color: var(--text-muted);">{project.description}</p>

  <div class="flex justify-between items-center text-xs pt-3 border-t border-[var(--border-card)]">
    <div class="flex items-center gap-4" style="color: var(--text-dim);">
      <span class="flex items-center gap-1"><Icon name="download" size={14} /> {project.downloads}</span>
      <span class="flex items-center gap-1"><Icon name="clock" size={14} /> {project.lastUpdate}</span>
    </div>
    <span class="font-semibold" style="color: var(--accent);">VIEW --&gt;</span>
  </div>
</div>
